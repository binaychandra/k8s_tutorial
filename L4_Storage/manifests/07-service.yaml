# ──────────────────────────────────────────────────────────
# 07-service.yaml
# ──────────────────────────────────────────────────────────
# NodePort Service to expose the storage demo app.
#
# Access the app at: http://localhost:30081
#
# Try it:
#   kubectl apply -f 07-service.yaml
#   curl http://localhost:30081/health
#   # Or open http://localhost:30081 in your browser
# ──────────────────────────────────────────────────────────
apiVersion: v1
kind: Service
metadata:
  name: storage-demo-service
  labels:
    app: storage-demo
    lesson: L4-storage
spec:
  type: NodePort
  selector:
    app: storage-demo                    # ← matches Pod labels
  ports:
    - protocol: TCP
      port: 80                           # ← Service port
      targetPort: 8000                   # ← Container port
      nodePort: 30081                    # ← Access from host
